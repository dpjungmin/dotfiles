if status is-interactive
    # Commands to run in interactive sessions can go here
end

# Set aliases
alias ..="cd .. && pwd"
alias ls="exa -F"
alias la="exa -aF"
alias ll="exa -lF"
alias lla="exa -alF"
alias tree="exa --tree --git-ignore"
alias cat="bat --plain --theme zenburn"
alias vim=nvim
alias c=cargo
alias cz=chezmoi
alias czd="chezmoi cd"
alias cza="chezmoi --verbose apply"
alias cze="chezmoi edit"
alias czu="chezmoi update"
alias czc="chezmoi state delete-bucket --bucket=scriptState && chezmoi --verbose apply --refresh-externals"
alias gc="git checkout"
alias gs="git status"
alias wt="wezterm"
alias wtk="wezterm show-keys"

# Set paths
set -x PATH $PATH /usr/local/bin
set -x PATH $PATH ~/.local/bin
set -x PATH $PATH ~/.emacs.d/bin
set -x PATH $PATH ~/.cargo/bin
set -x PATH $PATH ~/go/bin

# Set environment variables
set -Ux EDITOR {{ .editor }}
set -Ux RUST_BACKTRACE 1

# Set machine specific configurations
switch (uname)
    case Linux
        alias yank="xclip -selection clipboard"
    case Darwin
        set -x PATH $PATH /opt/homebrew/bin
    case '*'
end

# Set custom key bindings
bind \cd 'exit' # Exit the shell when Control+D is pressed

# This will run the mkdir command, and if it is successful, change the current
# working directory to the one just created.
function mkcd -d "Create a directory and set CWD"
    command mkdir $argv
    if test $status = 0
        switch $argv[(count $argv)]
            case '-*'

            case '*'
                cd $argv[(count $argv)]
                return
        end
    end
end

function fish_greeting
    echo

    {{- if eq .chezmoi.os "darwin" }}
    echo -e (uname -rs | awk '{print " \\\\e[1mOS: \\\\e[0;32m"$0"\\\\e[0m"}')
    echo -e (uname -n | awk '{print " \\\\e[1mHostname: \\\\e[0;32m"$0"\\\\e[0m"}')
    echo -e (uptime | sed 's/^up //' | awk '{print " \\\\e[1mUptime: \\\\e[0;32m"$0"\\\\e[0m"}')
    {{- end }}

    {{- if eq .chezmoi.os "linux" }}
    echo -e (uname -ro | awk '{print " \\\\e[1mOS: \\\\e[0;32m"$0"\\\\e[0m"}')
    echo -e (uname -n | awk '{print " \\\\e[1mHostname: \\\\e[0;32m"$0"\\\\e[0m"}')
    echo -e (uptime -p | sed 's/^up //' | awk '{print " \\\\e[1mUptime: \\\\e[0;32m"$0"\\\\e[0m"}')
    {{- end }}

    echo

    # Display TODOs if FILE exists
    if test -e ~/todo
        set_color red
        echo -e " \e[1mTODOs\e[0;32m"
        set_color yellow
        cat ~/todo | sed 's/^/ /'
        echo
    end

    set_color normal
end

zoxide init fish | source
starship init fish | source
